<div class="container">

    <h2>구매 내역 수정</h2>

    <form action="/purchaseupdate_process" method="post">
        <input type="hidden" name="purchase_id" value="<%= selected.purchase_id %>">

        <div class="mb-3">
            <label class="form-label" for="customer">고객</label>
            <select name="customer" id="customer" required>
                <% for (var i = 0; i < customers.length; i++) { %>
                    <option value="<%= customers[i].loginid %>" <%= customers[i].loginid === selected.loginid ? 'selected' : '' %>>
                        <%= customers[i].name %>
                    </option>
                <% } %>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label" for="product">상품</label>
            <select name="product" id="product" required>
                <% for (var i = 0; i < products.length; i++) { %>
                    <option value="<%= products[i].mer_id %>" <%= products[i].mer_id === selected.mer_id ? 'selected' : '' %>>
                        <%= products[i].name %>
                    </option>
                <% } %>
            </select>
        </div>


        <table>
            <tr>
                <td>
                    <div class="mb-3">
                        <label class="form-label" for="date">날짜</label>
                        <input class="form-control" type="text" name="date" id="date" value="<%= new Date(selected.date).getFullYear() %>.<%= ('0' + (new Date(selected.date).getMonth() + 1)).slice(-2) %>.<%= ('0' + new Date(selected.date).getDate()).slice(-2) %> : <%= ('0' + new Date(selected.date).getHours()).slice(-2) %>시 <%= ('0' + new Date(selected.date).getMinutes()).slice(-2) %>분 <%= ('0' + new Date(selected.date).getSeconds()).slice(-2) %>초" disabled/>
                    </div>
                </td>
                <td>
                    <div class="mb-3">
                        <label class="form-label" for="id">가격</label> 
                        <input class="form-control" type="text" name="price" style="width:300px;" value="<%= selected.price %>"/>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="mb-3">
                        <label class="form-label" for="id">포인트</label> 
                        <input class="form-control" type="text" name="point" style="width:300px;" value="<%= selected.point %>"/>
                    </div>
                </td>
                <td>
                    <div class="mb-3">
                        <label class="form-label" for="id">수량</label> 
                        <input class="form-control" type="text" name="qty" style="width:300px;" value="<%= selected.qty %>"/>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="mb-3">
                        <label class="form-label" for="id">총가격</label> 
                        <input class="form-control" type="text" name="total" style="width:300px;" value="<%= selected.total%>" required/>
                    </div>
                </td>
                <td></td>
            </tr>
        </table>

        <div class="mb-3">
            <label class="form-label" for="payYN">지불여부</label>
            <select name="payYN" id="payYN">
                <option value="Y" <%= selected.payYN === 'Y' ? 'selected' : '' %>>YES</option>
                <option value="N" <%= selected.payYN === 'N' ? 'selected' : '' %>>NO</option>
            </select>
        </div>
        
        <div class="mb-3">
            <label class="form-label" for="cancel">취소여부</label>
            <select name="cancel" id="cancel">
                <option value="Y" <%= selected.cancel === 'Y' ? 'selected' : '' %>>YES</option>
                <option value="N" <%= selected.cancel === 'N' ? 'selected' : '' %>>NO</option>
            </select>
        </div>
        
        <div class="mb-3">
            <label class="form-label" for="refund">환불여부</label>
            <select name="refund" id="refund">
                <option value="Y" <%= selected.refund === 'Y' ? 'selected' : '' %>>YES</option>
                <option value="N" <%= selected.refund === 'N' ? 'selected' : '' %>>NO</option>
            </select>
        </div>
        

        <button type="submit" class="btn btn-outline-primary btn-sm">수정</button>
        <a href="/purchaseview" class="btn btn-outline-primary btn-sm">구매 목록 돌아가기</a>
    </form>
</div>
