<table class="table table-bordered" style="text-align: center; vertical-align: middle;">
    <thead>
        <tr>
            <th>상품</th>
            <th>상품명</th>
            <th>단가</th>
            <th>구매량</th>
            <th>총금액</th>
            <th>구매일</th>
            <th>취소여부</th>
        </tr>
    </thead>

    <tbody>
        <% for ( i = 0; i < purchase.length; i++) { %>
        <tr style="text-align: center; vertical-align: middle;">
            <td><a href="#" style="text-decoration: none;">
                <img src="/<%= purchase[i].image %>" style="width:100px; height:100px;"></a>
            </td>
            <td><%= purchase[i].name %></td>
            <td><%= purchase[i].price.toLocaleString('ko-KR') %> 원</td>
            <td><%= purchase[i].qty %></td>
            <td><%= purchase[i].total.toLocaleString('ko-KR') %> 원</td>
            <td><%= new Date(purchase[i].date).getFullYear() %>.<%= ('0' + (new Date(purchase[i].date).getMonth() + 1)).slice(-2) %>.<%= ('0' + new Date(purchase[i].date).getDate()).slice(-2) %> :
                <%= ('0' + new Date(purchase[i].date).getHours()).slice(-2) %>시 
                <%= ('0' + new Date(purchase[i].date).getMinutes()).slice(-2) %>분 
                <%= ('0' + new Date(purchase[i].date).getSeconds()).slice(-2) %>초</td>
            <% if (purchase[i].cancel === 'Y') { %>
                <td>취소된 상품</td>
            <% } else { %>
                <td>
                    <!-- POST 방식으로 구매 취소 요청 -->
                    <form id="cancelForm<%= purchase[i].purchase_id %>" action="/purchase/cancel/<%= purchase[i].purchase_id %>" method="POST" style="display:none;">
                        <input type="hidden" name="purchase_id" value="<%= purchase[i].purchase_id %>">
                    </form>
                    <a href="#" onclick="document.getElementById('cancelForm<%= purchase[i].purchase_id %>').submit();">구매취소</a>
                </td>
            <% } %>
        </tr>
        <% } %>
    </tbody>
</table>

<% if (purchase.length == 0) { %>
    <p>구매한 상품이 없습니다. 상품을 구매해주십시오.</p>
<% } %>
